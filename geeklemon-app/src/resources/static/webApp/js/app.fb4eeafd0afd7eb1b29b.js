webpackJsonp([1],{"7zck":function(t,e){},JDS0:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),o=a.n(s),r=a("Xxa5"),i=a.n(r),n=a("pFYg"),l=a.n(n),c=a("exGp"),u=a.n(c),d=a("//Fk"),p=a.n(d),v=a("7+uW"),h=(a("7zck"),{name:"drawer",data:function(){return{mini:!1,drawer:!1,Index:"/index",dialog:!1,userName:"",password:"",loginErrShow:!1,loginErrMsg:"",theme:this.$store.state.theme,admins:[["Management","people_outline"],["Settings","settings"]],cruds:[["资料","view_quilt","UserProfile"],["文章","insert_drive_file","UserArticleList"],["相册","movie","UserGallery"],["收藏","favorite","UserStarList"]]}},created:function(){var t=this;window.getVue.$on("DRAWER_TOGGLED",function(){t.drawer=!t.drawer}),window.getVue.$on("LOGIN_SHOW",function(){t.toogleLoginMudal()})},methods:{logOut:function(){var t={isLogin:!1,user:null,timestamp:""};localStorage.setItem("geeklemon-login-info",o()(t)),this.$store.commit("changeLoginState",t),this.$toasted.global.app_info({message:"退出登陆"})},toogleLoginMudal:function(){this.dialog=!this.dialog},gotoUserDetail:function(t){t.stopPropagation(),this.$store.state.loginState.isLogin||this.toogleLoginMudal()},fixApp:function(){localStorage.setItem("geeklemon-accessInfo",null),window.location.reload()},ToUser:function(t){var e=this.$store.state.loginState.user.openid;this.$router.push({name:t,params:{userOpenId:e}})},login:function(){var t=this;if(this.userName.trim().length>0&&this.userName.trim().length<25&&this.password.trim().length>0){var e=this.$store.state.accessInfo,a=new URLSearchParams;a.append("name",this.userName),a.append("password",this.password),this.$axios.post("/app/api/user/login",a,{headers:{accessKey:e.accessKey,accessToken:e.accessToken}}).then(function(e){if(e.data.result)if(e.data.success){var a=e.data.body,s={isLogin:!0,user:a,timestamp:(new Date).getTime()};localStorage.setItem("geeklemon-login-info",o()(s)),t.$store.commit("changeLoginState",s);var r="欢迎您，"+a.name;t.$toasted.global.app_info({message:r}),t.toogleLoginMudal()}else t.$toasted.global.app_error({message:e.data.message});else t.$toasted.global.app_error({message:"出错了，稍后重试！"}),t.toogleLoginMudal()})}else this.$toasted.global.app_warning({message:"用户名或密码不能为空！"})}}}),m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{attrs:{id:"appDrawer","mini-variant":t.mini,fixed:"",dakr:"",app:""},on:{"update:miniVariant":function(e){t.mini=e},"update:mini-variant":function(e){t.mini=e}},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-toolbar",{attrs:{color:t.theme.color,dark:""}},[a("v-toolbar-title",{staticClass:"ml-0 pl-3"},[a("span",{staticClass:"hidden-sm-and-down white--text"},[t._v("geeklemon")])])],1),t._v(" "),a("v-img",{attrs:{"aspect-ratio":16/9,src:"../../static/material.webp"},on:{click:t.gotoUserDetail}},[a("v-layout",{staticClass:"lightbox white--text",attrs:{"pa-2":"",column:"","fill-height":""}},[a("v-spacer"),t._v(" "),this.$store.state.loginState.isLogin?a("v-flex",{attrs:{shrink:""}},[a("div",{staticClass:"subheading"},[t._v(t._s(this.$store.state.loginState.user.nickName))]),t._v(" "),a("div",{staticClass:"body-1"},[t._v(t._s(this.$store.state.loginState.user.mail))])]):t._e(),t._v(" "),this.$store.state.loginState.isLogin?t._e():a("v-flex",{attrs:{shrink:""}},[a("div",{staticClass:"subheading"},[t._v("未登陆")])])],1)],1),t._v(" "),[a("v-list",[a("v-list-tile",{attrs:{to:"/index"}},[a("v-list-tile-action",[a("v-icon",[t._v("home")])],1),t._v(" "),a("v-list-tile-title",[t._v("Home")])],1),t._v(" "),this.$store.state.loginState.isLogin?t._e():a("v-list-tile",{on:{click:t.toogleLoginMudal}},[a("v-list-tile-action",[a("v-icon",[t._v("account_circle")])],1),t._v(" "),a("v-list-tile-title",[t._v("登陆")])],1),t._v(" "),this.$store.state.loginState.isLogin?a("v-list-group",{attrs:{"prepend-icon":"explore",value:"true"},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-tile",[a("v-list-tile-title",[t._v("用户中心")])],1)]},proxy:!0}],null,!1,1214703517)},[t._v(" "),t._l(t.cruds,function(e,s){return a("v-list-tile",{key:s,on:{click:function(a){return t.ToUser(e[2])}}},[a("v-list-tile-title",{domProps:{textContent:t._s(e[0])}}),t._v(" "),a("v-list-tile-action",[a("v-icon",{domProps:{textContent:t._s(e[1])}})],1)],1)})],2):t._e(),t._v(" "),a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[t._v("settings")])],1),t._v(" "),a("v-list-tile-title",[t._v("Settings")])],1),t._v(" "),a("v-list-tile",{on:{click:t.fixApp}},[a("v-list-tile-action",[a("v-icon",[t._v("build")])],1),t._v(" "),a("v-list-tile-title",[t._v("修复")])],1),t._v(" "),this.$store.state.loginState.isLogin?a("v-list-tile",{on:{click:t.logOut}},[a("v-list-tile-action",[a("v-icon",[t._v("account_circle")])],1),t._v(" "),a("v-list-tile-title",[t._v("注销")])],1):t._e()],1)],t._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("登陆")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{"prepend-icon":"account_circle",counter:10,label:"userName",clearable:"",hint:"输入登录名"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{"prepend-icon":"lock",label:"Password",type:"password",required:"",clearable:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1)],1),t._v(" "),a("small",{directives:[{name:"show",rawName:"v-show",value:t.loginErrShow,expression:"loginErrShow"}]},[t._v("error message")])],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.login}},[t._v("login")])],1)],1)],1)],1)],2)},staticRenderFns:[]},f={name:"toolbar",methods:{refresh:function(){window.location.reload()},darkTheme:function(){window.getVue.$emit("THEME-DARK")},handleDrawerToggle:function(){window.getVue.$emit("DRAWER_TOGGLED")},changeTheme:function(t){console.log(t),this.$cookies.set("geeklemon-app-theme",t,2592e3),this.$store.commit("changeTheme",t)}},data:function(){return{title:"geeklemon",theme:this.$store.state.theme,themeColors:this.$store.state.themeColors}},created:function(){var t=this;window.getVue.$on("CHANGE_TITLE",function(e){t.title=e})}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-toolbar",{attrs:{dark:"",color:t.theme.color,fixed:"",app:""}},[a("v-toolbar-side-icon",{on:{click:function(e){return e.stopPropagation(),t.handleDrawerToggle(e)}}}),t._v(" "),a("v-toolbar-title",{staticClass:"white--text"},[t._v(t._s(t.title))]),t._v(" "),a("v-spacer"),t._v(" "),a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{flat:""}},s),[t._v("主题")])]}}])},[t._v(" "),a("v-list",[a("v-list-tile",{on:{click:t.darkTheme}},[a("v-list-tile-content",[a("v-list-tile-title",[t._v("夜间切换")])],1)],1),t._v(" "),t._l(t.themeColors,function(e,s){return a("div",{key:s,on:{click:function(e){return t.changeTheme(s)}}},[a("v-list-tile",{class:e},[a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e))])],1)],1)],1)})],2)],1)],1)},staticRenderFns:[]},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-footer",{attrs:{height:"auto",color:"primary lighten-1"}},[a("v-layout",{attrs:{"justify-center":"",row:"",wrap:""}},[t._l(t.links,function(e){return a("v-btn",{key:e,attrs:{color:"white",flat:"",round:""}},[t._v("\n      "+t._s(e)+"\n    ")])}),t._v(" "),a("v-flex",{attrs:{primary:"","lighten-2":"","py-3":"","text-xs-center":"","white--text":"",xs12:""}},[t._v("\n      ©2018 — "),a("strong",[t._v("Vuetify")])])],2)],1)},staticRenderFns:[]},b={components:{Drawer:a("VU/8")(h,m,!1,null,null,null).exports,toolbar:a("VU/8")(f,g,!1,null,null,null).exports,Footer:a("VU/8")({data:function(){return{links:["Home","About Us","Team","Services","Blog","Contact Us"]}}},_,!1,null,null,null).exports},data:function(){return{themeDark:!1}},created:function(){var t=this;window.getVue=this,window.getVue.$on("THEME-DARK",function(){t.themeDark=!t.themeDark})},methods:{swiperleft:function(){this.$router.back()}},name:"App"},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{dark:t.themeDark}},[a("drawer"),t._v(" "),a("toolbar"),t._v(" "),a("v-content",[a("keep-alive",[t.$route.meta.keepAlive?a("router-view"):t._e()],1),t._v(" "),t.$route.meta.keepAlive?t._e():a("router-view")],1),t._v(" "),a("footer")],1)},staticRenderFns:[]},x=a("VU/8")(b,w,!1,null,null,null).exports,y=a("/ocq"),k={name:"index",data:function(){return{theme:this.$store.state.theme,articles:[],searchShow:!0,searchKey:"",searchSubject:"",subjects:["AI","emotion","share"],YHeight:0,mode:1,paramInfo:{pageNum:0,pageSize:6,topic:"",authorOpenId:""},totalArticleNum:0,totalPage:0,snackbar:{show:!1,text:"",timeout:1e3}}},watch:{searchSubject:function(t,e){this.changeTopic(t)}},methods:{changeTopic:function(t){window.getVue.$emit("CHANGE_TITLE",t),this.paramInfo.topic=t,this.initPage()},search:function(){this.searchKey.trim().length>25&&(this.toast("文字超出部分将不会生效！"),this.searchKey=this.searchKey.trim().substring(0,25)),this.initPage(!0)},getDetail:function(t){this.$router.push({name:"detail",params:{id:t}})},getArticleList:function(t,e){var a=this,s=this.$store.state.accessInfo;this.$axios.post("/app/api/article/list",t,{headers:{accessKey:s.accessKey,accessToken:s.accessToken}}).then(function(t){var s=t.data;if(s.success){if(0==s.body.size)return a.toast(a.searchKey+":没有数据"),void(a.searchKey="");e&&(a.articles=[]),s.body.list.forEach(function(t){a.articles.push(t)}),a.paramInfo.pageNum+=1,a.totalPage=s.body.pages}else a.toast(s.message)})},toast:function(t){this.snackbar.text=t,this.snackbar.show=!0},getTopics:function(){var t=this;return u()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$root.post("/app/api/article/topics",null);case 2:(a=e.sent)&&a.result&&(t.subjects=a.body);case 4:case"end":return e.stop()}},e,t)}))()},handleScroll:function(){var t=document.body.scrollHeight||documenhandleScrollt.documentElement.scrollHeight,e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,a=document.documentElement.clientHeight||document.body.clientHeight;var s=e-this.YHeight;if(this.YHeight=e,this.searchShow=s<0,a+e>=t)if(this.paramInfo.pageNum<this.totalPage){var o=this.getReqParams();this.getArticleList(o)}else this.toast("没有更多数据了！")},refresh:function(){this.searchKey="",this.paramInfo.authorOpenId="",this.paramInfo.topic="",this.getTopics(),this.initPage()},initPage:function(t){t||(this.articles=[]),this.paramInfo.pageNum=0;var e=this.getReqParams();this.getArticleList(e,t)},getReqParams:function(){var t=new URLSearchParams,e=this.paramInfo.pageNum+1;return t.append("pageNum",e),t.append("userOpenId",this.paramInfo.authorOpenId),t.append("topic",this.paramInfo.topic),t.append("keyWord",this.searchKey),t}},created:function(){var t=this;window.getVue.$on("CHANGE_AUTHOR",function(e){t.searchKey="",t.paramInfo.authorOpenId=e,t.paramInfo.topic="",t.initPage()})},mounted:function(){this.getTopics(),this.initPage()},activated:function(){window.addEventListener("scroll",this.handleScroll)},deactivated:function(){window.removeEventListener("scroll",this.handleScroll)}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{staticClass:"wrapper"},[a("v-card",{directives:[{name:"show",rawName:"v-show",value:t.searchShow,expression:"searchShow"}],staticStyle:{position:"fixed",width:"100%",padding:"16px","z-index":"2"},attrs:{fluid:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs4:"",sm2:"","d-flex":""}},[a("v-select",{attrs:{items:t.subjects,label:"分类"},model:{value:t.searchSubject,callback:function(e){t.searchSubject=e},expression:"searchSubject"}})],1),t._v(" "),a("v-flex",{attrs:{xs8:"",sm10:""}},[a("v-text-field",{attrs:{counter:"25",autofocus:!0},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1)],1)],1),t._v(" "),a("v-container",{attrs:{"grid-list-xl":"",fluid:""}},[a("div",{staticStyle:{height:"60px"}}),t._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},t._l(t.articles,function(e){return a("v-flex",{key:e.id,attrs:{xs12:"",sm4:"",md4:"",lg4:""}},[a("v-card",[a("div",{on:{click:function(a){return t.getDetail(e.id)}}},[a("v-img",{attrs:{src:e.src,"aspect-ratio":"2.75"}}),t._v(" "),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-0"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticStyle:{"text-overflow":"ellipsis"}},[t._v(t._s(e.description))])])])],1),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"orange"}},[t._v(t._s(e.subject))]),t._v(" "),a("v-btn",{attrs:{flat:"",color:"orange"}},[t._v(t._s(e.author))])],1)],1)],1)}),1),t._v(" "),a("v-snackbar",{attrs:{"multi-line":"",right:"",timeout:t.snackbar.timeout,top:""},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v("\n        "+t._s(t.snackbar.text)+"\n        "),a("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(e){t.snackbar.show=!1}}},[t._v("Close")])],1)],1)],1),t._v(" "),a("v-btn",{attrs:{color:t.theme.color,bottom:"",left:"",fixed:"",fab:"",small:""},on:{click:t.refresh}},[a("v-icon",[t._v("refresh")])],1)],1)},staticRenderFns:[]},I=a("VU/8")(k,$,!1,null,null,null).exports,S={name:"detail",data:function(){return{stared:!1,loadProgress:!1,articleList:[],content:"",articleId:this.$route.params.id,articleInfo:{title:"",subject:"",snum:0,authorId:"",author:"",time:""},dialog:!1,theme:this.$store.state.theme,commentContent:"",commentPageNum:0,commentTotalPage:1,commentList:[],documentWidth:1,commentAllDone:!1}},computed:{starColor:function(){return this.stared?"red":this.theme.color}},mounted:function(){this.$route.params.id;this.getArticleDetail(),window.addEventListener("scroll",this.handleScroll)},created:function(){this.getArticleDetail(),this.documentWidth=.9*document.body.clientWidth},beforeDestroy:function(){window.getVue.$emit("CHANGE_TITLE","geeklemon")},methods:{pageBack:function(){this.$router.back()},comment:function(){var t=this;if(this.$store.state.loginState.isLogin)if(this.commentContent.trim().length>0){this.dialog=!1;var e=this.commentContent.trim();this.commentContent.trim().length>100&&(e=this.commentContent.trim().substring(0,100),this.$toasted.global.app_warning({message:"超出字数的字将被抛弃"}));this.$toasted.global.app_loading();this.commentContent="";var a=this.$store.state.accessInfo,s=new URLSearchParams;s.append("articleId",this.$route.params.id),s.append("userOpenId",this.$store.state.loginState.user.openid),s.append("content",e),this.$axios.post("/app/api/article/comment",s,{headers:{accessKey:a.accessKey,accessToken:a.accessToken}}).then(function(e){e.data.success?t.$toasted.global.app_info({message:"超出字数的字将被抛弃"}):t.$toasted.global.app_error({message:"评论出错，稍后再试"})})}else this.$toasted.global.app_warning({message:"内容不能空"});else this.$toasted.global.app_login()},toggleComment:function(){if(this.$store.state.loginState.isLogin)this.dialog=!this.dialog;else{window.getVue.$emit("LOGIN_SHOW");this.$toasted.global.app_login()}},getArticleDetail:function(){var t=this;this.loadProgress=!0;var e=this.$store.state.accessInfo,a=new URLSearchParams;a.append("id",this.$route.params.id),this.$store.state.loginState.isLogin&&a.append("userOpenId",this.$store.state.loginState.user.openid),this.$axios.post("/app/api/article/info",a,{headers:{accessKey:e.accessKey,accessToken:e.accessToken}}).then(function(e){if(t.loadProgress=!1,e.data.result){var a=e.data.body.result,s=a.title,o=a.subject,r=a.snum,i=a.authorId,n=a.author,l=a.time;t.articleInfo.title=s,t.articleInfo.subject=o,t.articleInfo.snum=r,t.articleInfo.authorId=i,t.articleInfo.author=n,t.articleInfo.time=l,t.author=n;var c=e.data.body.starStatus;t.stared=c,window.getVue.$emit("CHANGE_TITLE",s),t.content=e.data.body.result.content}else t.$toasted.global.app_error({message:e.data.message})})},starArticle:function(){var t=this;if(this.$store.state.loginState.isLogin){var e=this.$store.state.accessInfo,a=new URLSearchParams;if(a.append("userOpenId",this.$store.state.loginState.user.openid),a.append("id",this.articleId),this.stared){if(!confirm("取消收藏吗？"))return;a.append("opt","unStar")}else a.append("opt","star");this.$axios.post("/app/api/article/starOpt",a,{headers:{accessKey:e.accessKey,accessToken:e.accessToken}}).then(function(e){e.data.success?(t.$toasted.global.app_info({message:e.data.body}),t.stared=!t.stared):t.$toasted.global.app_error({message:"操作失败，请稍后重试！"})})}else window.getVue.$emit("LOGIN_SHOW"),this.$toasted.global.app_login()},handleScroll:function(){var t=document.body.scrollHeight,e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,a=document.documentElement.clientHeight||document.body.clientHeight;if(this.YHeight=e,a+e>=t)if(this.commentPageNum<this.commentTotalPage){var s=new URLSearchParams;s.append("articleId",this.articleId),s.append("pageNum",this.commentPageNum+1),this.getComments(s)}else this.commentAllDone||(this.$toasted.global.app_info({message:"已加载所有评论！"}),this.commentAllDone=!0)},getComments:function(t){var e=this,a=this.$store.state.accessInfo;this.$axios.post("/app/api/article/comment/list",t,{headers:{accessKey:a.accessKey,accessToken:a.accessToken}}).then(function(t){t.data.result&&(e.commentTotalPage=t.data.body.pages,t.data.body.list.forEach(function(t){e.commentList.push(t)}),e.commentPageNum+=1)})}},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loadProgress?a("v-layout",{staticStyle:{position:"fixed",width:"100%","z-index":"2"},attrs:{"justify-center":""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"red"}})],1):t._e(),t._v(" "),a("v-container",{ref:"content",attrs:{"grid-list-xl":"",fluid:"",id:"detail"}},[a("v-layout",{attrs:{row:"",wrap:""}}),t._v(" "),a("div",{staticClass:"text-xs-center"},[a("v-icon",{attrs:{color:t.theme.color}},[t._v("account_circle")]),t._v("\n      "+t._s(t.articleInfo.author)+"\n      "),a("v-icon",{attrs:{color:t.theme.color}},[t._v("alarm")]),t._v("\n      "+t._s(t.articleInfo.time)+"\n      "),a("v-icon",{attrs:{color:t.theme.color}},[t._v("email")]),t._v("\n      "+t._s(t.articleInfo.subject)+"\n      "),a("v-icon",{attrs:{color:t.starColor},on:{click:t.starArticle}},[t._v("favorite")]),t._v("\n      "+t._s(t.articleInfo.snum)+"\n    ")],1),t._v(" "),a("v-badge"),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.content)}}),t._v(" "),a("div",[a("v-btn",{attrs:{flat:"",color:t.theme.color}},[a("v-icon",[t._v("book")]),t._v("评论\n      ")],1)],1),t._v(" "),t.commentList.length>0?a("div",t._l(t.commentList,function(e){return a("v-card",{key:e.id},[a("v-card-title",[t._v(t._s(e.user)+" 在 "+t._s(e.time)+" 说:")]),t._v(" "),a("v-card-text",{domProps:{innerHTML:t._s(e.content)}})],1)}),1):t._e(),t._v(" "),a("v-speed-dial",{attrs:{fixed:"",bottom:"",left:"",direction:"top","open-on-hover":""},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-btn",{attrs:{color:t.theme.color,dark:"",fab:"",small:""}},[a("v-icon",[t._v("reorder")]),t._v(" "),a("v-icon",[t._v("close")])],1)]},proxy:!0}])},[t._v(" "),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:t.starColor},on:{click:t.starArticle}},[a("v-icon",[t._v("favorite")])],1),t._v(" "),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:t.theme.color},on:{click:t.toggleComment}},[a("v-icon",[t._v("chat")])],1),t._v(" "),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:t.theme.color}},[a("v-icon",[t._v("call_split")])],1)],1),t._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("评论")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-textarea",{attrs:{counter:"100",name:"input-7-1",label:"comment",hint:"",autofocus:"",clearable:""},model:{value:t.commentContent,callback:function(e){t.commentContent=e},expression:"commentContent"}})],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.theme.color,flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),t._v(" "),a("v-btn",{attrs:{color:t.theme.color,flat:""},on:{click:t.comment}},[t._v("评论")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var L=a("VU/8")(S,T,!1,function(t){a("JDS0")},"data-v-4c5c39e2",null).exports,C=a("bOdI"),P=a.n(C),E=a("ESwS"),N=a.n(E),A=a("+cKO"),D={validations:{cTitle:{required:A.required,maxLength:Object(A.maxLength)(15)},email:{required:A.required,email:A.email},select:{required:A.required}},computed:{nullErrors:function(){var t=[];return this.$v.cTitle.$dirty?(!this.$v.cTitle.maxLength&&t.push("请注意字符串长度"),!this.$v.cTitle.required&&t.push("必填项"),t):t}},data:function(){return{subject:["a","b","c","d"],sort:["desc","asc"],title:"",author:"",sortBy:"",subjectSelected:"",showSearch:!1,cTitle:"",cAuthor:"",cDes:"",cSubject:"",showEditorLab:!1,selected:[],theme:this.$store.state.theme,totalDesserts:0,desserts:[],loading:!0,pagination:{},headers:[P()({text:"Actions",value:"iron",sortable:!1},"value",""),{text:"Dessert (100g serving)",align:"left",sortable:!1,value:"name"},{text:"Calories",value:"calories"},{text:"Fat (g)",value:"fat"},{text:"Carbs (g)",value:"carbs"},{text:"Protein (g)",value:"protein"},{text:"Iron (%)",value:"iron"}],articleHeaders:[{text:"Actions",value:"id",sortable:!1},{text:"ID",align:"left",sortable:!0,value:"id"},{text:"Title",value:"title"},{text:"Author",value:"author"},{text:"Subject",value:"aubject"}]}},watch:{pagination:{handler:function(){var t=this;this.getDataFromApi().then(function(e){t.desserts=e.items,t.totalDesserts=e.total})},deep:!0}},mounted:function(){var t=this,e=this.$store.state.accessInfo,a=new URLSearchParams;a.append("num",1),this.$axios.post("/app/api/article/list",a,{headers:{axiosHeaders:e}}).then(function(t){t.data.list,console.log("lists"+t.data.list[0].title)}),this.getDataFromApi().then(function(e){t.desserts=e.items,t.totalDesserts=e.total})},methods:{getDataFromApi:function(){var t=this;return this.showSearch=!1,console.log(Boolean(this.subjectSelected)),console.log(Boolean(this.title.trim())),console.log(Boolean(this.author.trim())),console.log(Boolean(this.sortBy)),console.log(this.pagination.rowsPerPage),console.log(this.pagination.sortBy),console.log(this.pagination.descending),console.log(this.pagination.page),console.log(this.pagination),this.loading=!0,new p.a(function(e,a){var s=t.pagination,o=s.sortBy,r=s.descending,i=s.page,n=s.rowsPerPage,l=t.getDesserts(),c=l.length;t.pagination.sortBy&&(l=l.sort(function(t,e){var a=t[o],s=e[o];return r?a<s?1:a>s?-1:0:a<s?-1:a>s?1:0})),n>0&&(l=l.slice((i-1)*n,i*n)),setTimeout(function(){t.loading=!1,e({items:l,total:c})},1e3)})},getDesserts:function(){return[{name:"Frozen Yogurt",calories:159,fat:6,carbs:24,protein:4,iron:"1%"},{name:"Ice cream sandwich",calories:237,fat:9,carbs:37,protein:4.3,iron:"1%"},{name:"Eclair",calories:262,fat:16,carbs:23,protein:6,iron:"7%"},{name:"Cupcake",calories:305,fat:3.7,carbs:67,protein:4.3,iron:"8%"},{name:"Gingerbread",calories:356,fat:16,carbs:49,protein:3.9,iron:"16%"},{name:"Jelly bean",calories:375,fat:0,carbs:94,protein:0,iron:"0%"},{name:"Lollipop",calories:392,fat:.2,carbs:98,protein:0,iron:"2%"},{name:"Honeycomb",calories:408,fat:3.2,carbs:87,protein:6.5,iron:"45%"},{name:"Donut",calories:452,fat:25,carbs:51,protein:4.9,iron:"22%"},{name:"KitKat",calories:518,fat:26,carbs:65,protein:7,iron:"6%"}]},getDetail:function(t){this.$router.push({name:"detail",params:{id:t}})},toggleShowSearch:function(){this.showSearch=!this.showSearch},edit:function(t){console.log(t);var e=t.name,a=t.calories,s=t.fat;t.carbs;this.cTitle=e,this.cAuthor=a,this.cDes=s,this.cSubject="c",this.showEditorLab=!0},save:function(){this.$v.$touch(),this.$v.$invalid?console.log(this.$v.$invalid):(this.showEditorLab=!1,alert("已保存"))}}},O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[a("button",{on:{click:t.toggleShowSearch}},[a("v-icon",[t._v("notes")])],1)])]),t._v(" "),a("v-card-text",{directives:[{name:"show",rawName:"v-show",value:t.showSearch,expression:"showSearch"}]},[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"title",required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"author"},model:{value:t.author,callback:function(e){t.author=e},expression:"author"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{items:t.subject,label:"分类",required:""},model:{value:t.subjectSelected,callback:function(e){t.subjectSelected=e},expression:"subjectSelected"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-select",{attrs:{items:t.sort,label:"排序方式"},model:{value:t.sortBy,callback:function(e){t.sortBy=e},expression:"sortBy"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-btn",{attrs:{flat:""},on:{click:t.getDataFromApi}},[a("v-icon",[t._v("search")])],1)],1)],1)],1)],1)],1),t._v(" "),a("v-card",[a("v-card-title",[t._v("\n      标题\n      "),a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.selected.length,expression:"selected.length"}],attrs:{small:"",fab:"",color:t.theme.color}},s),[a("v-icon",[t._v("remove")])],1)]}}])},[t._v(" "),a("span",[t._v("删除已选")])]),t._v(" "),a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({directives:[{name:"show",rawName:"v-show",value:t.selected.length,expression:"selected.length"}],attrs:{small:"",fab:"",color:t.theme.color}},s),[a("v-icon",[t._v("save")])],1)]}}])},[t._v(" "),a("span",[t._v("导出已选")])]),t._v(" "),a("v-spacer"),t._v(" "),a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{small:"",fab:"",color:t.theme.color},on:{click:function(e){t.showEditorLab=!0}}},s),[a("v-icon",[t._v("add")])],1)]}}])},[t._v(" "),a("span",[t._v("添加数据")])])],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{"item-key":"calories","select-all":"",headers:t.headers,items:t.desserts,pagination:t.pagination,"total-items":t.totalDesserts,loading:t.loading},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1),t._v(" "),a("td",{staticClass:"justify-center"},[a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(s){var o=s.on;return[a("v-icon",t._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.getDetail(e.item)}}},o),[t._v("duo")])]}}],null,!0)},[t._v(" "),a("v-icon",{attrs:{small:""}},[t._v("delete")]),t._v(" "),a("span",[t._v("查看详情")])],1),t._v(" "),a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(s){var o=s.on;return[a("v-icon",t._g({attrs:{small:""},on:{click:function(a){return t.edit(e.item)}}},o),[t._v("edit")])]}}],null,!0)},[t._v(" "),a("span",[t._v("编辑")])])],1),t._v(" "),a("td",[t._v(t._s(e.item.name))]),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.calories))]),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.fat))]),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.carbs))]),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.protein))]),t._v(" "),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.iron))])]}},{key:"no-data",fn:function(){return[a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("Sorry, nothing to display here :(")])]},proxy:!0}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),t._v(" "),a("v-footer"),t._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.showEditorLab,callback:function(e){t.showEditorLab=e},expression:"showEditorLab"}},[a("v-card",[a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{counter:15,"error-messages":t.nullErrors,required:"",label:"标题",hint:""},on:{input:function(e){return t.$v.cTitle.$touch()},blur:function(e){return t.$v.cTitle.$touch()}},model:{value:t.cTitle,callback:function(e){t.cTitle=e},expression:"cTitle"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{counter:15,label:"作者",required:""},model:{value:t.cAuthor,callback:function(e){t.cAuthor=e},expression:"cAuthor"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{items:t.subject,label:"分类",required:""},model:{value:t.cSubject,callback:function(e){t.cSubject=e},expression:"cSubject"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{counter:150,label:"描述",required:""},model:{value:t.cDes,callback:function(e){t.cDes=e},expression:"cDes"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){t.showEditorLab=!1}}},[t._v("Close")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.save}},[t._v("save")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},j=a("VU/8")(D,O,!1,null,null,null).exports,K=a("aFK5"),U=a.n(K),R={name:"userProfile",data:function(){return{valueDeterminate:60,user:{},userInfo:{},inputText:{value:"",type:""},theme:this.$store.state.theme,editDialog:!1,uploadLogo:!1,upload:{userlogo:"",submit:!1},uploadProgress:{show:!1,progress:1},file:null,validate:{nameRules:[function(t){return!!t||"昵称不能空"},function(t){return t&&t.length<20||"昵称长度不能大于20"}],mailRules:[function(t){return/^[a-z\d]+(\.[a-z\d]+)*@([\da-z](-[\da-z])?)+(\.{1,2}[a-z]+)+$/.test(t)||"请输入邮箱地址"},function(t){return!t}]}}},methods:{closeUpload:function(t){t.stopPropagation(),this.uploadLogo=!1,this.upload.submit=!1;var e=document.getElementById("uploadClick");e.outerHTML=e.outerHTML},uploadClick:function(t){t.stopPropagation(),this.$refs.uploadClick.click()},startUpload:function(){var t=this;this.uploadLogo=!1,this.uploadProgress.show=!0;var e=new FormData;e.append("file",this.file),e.append("userOpenId",this.userInfo.openid);var a=this.$store.state.accessInfo,s={headers:{"Content-Type":"multipart/form-data",accessKey:a.accessKey,accessToken:a.accessToken},onUploadProgress:function(e){var a=e.loaded/e.total*100|0;t.uploadProgress.progress=a,100==a&&(t.uploadProgress.show=!1)}},o=this.$remoteProperties.remoteAddress;this.$axios.post(o,e,s).then(function(e){var a=e.data;t.userInfo.userlogo=t.$remoteProperties.remoteAddress+"/images/userlogo/"+a.body}).catch(function(t){console.log(t)})},changeimg:function(t){var e=this;return u()(i.a.mark(function a(){var s,o,r;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(s=t.target.files[0],e.file=s,s.type.startsWith("image")){a.next=5;break}return e.$root.app_warning("必须是图片！"),a.abrupt("return");case 5:if(!(parseInt(s.size/1e3)>1e4)){a.next=9;break}return e.$root.app_warning("图片不要超过10M"),a.abrupt("return");case 9:window.FileReader&&(o=new FileReader,r=e,o.onloadend=function(t){r.upload.userlogo=t.target.result,r.upload.submit=!0},o.readAsDataURL(s));case 10:case"end":return a.stop()}},a,e)}))()},changeLogo:function(){this.upload.userlogo=this.userInfo.userlogo,this.uploadLogo=!0},back:function(t){t.stopPropagation(),this.$router.back()},edit:function(t){t.stopPropagation(),this.user=JSON.parse(o()(this.userInfo)),this.editDialog=!this.editDialog},editUser:function(){var t=this;return u()(i.a.mark(function e(){var a,s,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.user.mail,s=t.user.nickName,o()(t.userInfo)!=o()(t.user)){e.next=6;break}return t.$root.app_info("没有改变信息"),t.editDialog=!t.editDialog,e.abrupt("return");case 6:if(0!=s.trim().length){e.next=9;break}return t.$root.app_warning("昵称不能空"),e.abrupt("return");case 9:if(!(s!=t.userInfo.nickName&&s.trim().length>20)){e.next=12;break}return t.$root.app_warning("昵称过长"),e.abrupt("return");case 12:if(!(a.length>1&&a!=t.userInfo.mail)||/^[a-z\d]+(\.[a-z\d]+)*@([\da-z](-[\da-z])?)+(\.{1,2}[a-z]+)+$/.test(a)){e.next=15;break}return t.$root.app_warning("邮箱验证不通过"),e.abrupt("return");case 15:return t.editDialog=!1,t.$root.app_loading("后台更改中。。"),r={userOpenId:t.userInfo.openid,nickName:t.user.nickName,userAge:t.user.age,userEmail:t.user.mail,userAutographContent:t.user.autograph},e.next=20,t.$root.post("/app/api/user/update",r);case 20:e.sent.body&&t.$root.app_info("更改成功");case 22:case"end":return e.stop()}},e,t)}))()},isObjectValueEqual:function(t,e){var a=U()(t),s=U()(e);if(a.length!=s.length)return!1;for(var o=0;o<a.length;o++){var r=a[o];if(t[r]!==e[r])return!1}return!0},getUserProfile:function(){var t=this;this.$root.post("/app/api/user/info",{userOpenId:this.user.userOpenId}).then(function(e){if(e.body){var a=e.body;t.userInfo=a}})}},mounted:function(){this.user.userOpenId=this.$route.params.userOpenId||3,this.getUserProfile()}},H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.uploadProgress.show?a("v-progress-linear",{model:{value:t.uploadProgress.progress,callback:function(e){t.$set(t.uploadProgress,"progress",e)},expression:"uploadProgress.progress"}}):t._e(),t._v(" "),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("v-card",[a("v-img",{attrs:{src:t.userInfo.userlogo,height:"300px"},on:{click:t.changeLogo}},[a("v-layout",{attrs:{column:"","fill-height":""}},[a("v-card-title",[a("v-btn",{attrs:{dark:"",icon:""},on:{click:t.back}},[a("v-icon",{attrs:{color:t.theme.color}},[t._v("chevron_left")])],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"mr-3",attrs:{dark:"",icon:""},on:{click:t.edit}},[a("v-icon",{attrs:{color:t.theme.color}},[t._v("edit")])],1),t._v(" "),a("v-btn",{attrs:{dark:"",icon:""}},[a("v-icon",{attrs:{color:t.theme.color}},[t._v("more_vert")])],1)],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-card-title",{staticClass:"white--text pl-5 pt-5"},[a("div",{staticClass:"display-1 pl-5 pt-5"},[t._v(t._s(t.userInfo.nickName))])])],1)],1),t._v(" "),a("v-list",{attrs:{"two-line":""}},[a("v-list-tile",[a("v-list-tile-action",[a("v-icon",{attrs:{color:t.theme.color}},[t._v("phone")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v("(650) 555-1234")]),t._v(" "),a("v-list-tile-sub-title",[t._v("Mobile")])],1)],1),t._v(" "),a("v-divider",{attrs:{inset:""}}),t._v(" "),a("v-list-tile",[a("v-list-tile-action",[a("v-icon",{attrs:{color:t.theme.color}},[t._v("mail")])],1),t._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(t.userInfo.mail))]),t._v(" "),a("v-list-tile-sub-title",[t._v("Personal")])],1)],1),t._v(" "),a("v-divider",{attrs:{inset:""}}),t._v(" "),a("v-list-tile",[a("v-list-tile-action",[a("v-icon",{attrs:{color:t.theme.color}},[t._v("bookmark")])],1),t._v(" "),a("v-list-tile-content",[t._v(t._s(t.userInfo.autograph))])],1),t._v(" "),a("v-list-tile",[a("v-list-tile-action",[a("v-icon",{attrs:{color:t.theme.color}},[t._v("calendar_today")])],1),t._v(" "),a("v-list-tile-content",[t._v(t._s(t.userInfo.age))])],1),t._v(" "),a("v-list-tile",[a("v-list-tile-action",[a("v-icon",{attrs:{color:t.theme.color}},[t._v("accessibility_new")])],1),t._v(" "),a("v-list-tile-content",[t._v(t._s(t.userInfo.sex))])],1)],1)],1)],1)],1),t._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.uploadLogo,callback:function(e){t.uploadLogo=e},expression:"uploadLogo"}},[a("v-card",[a("v-img",{attrs:{src:t.upload.userlogo,height:"300px"},on:{click:t.closeUpload}},[a("v-layout",{attrs:{column:"","fill-height":""}},[a("v-card-title",[a("v-btn",{attrs:{dark:"",icon:""},on:{click:t.closeUpload}},[a("v-icon",{attrs:{color:t.theme.color}},[t._v("chevron_left")])],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"mr-3",attrs:{dark:"",icon:""},on:{click:t.uploadClick}},[a("v-icon",{attrs:{color:t.theme.color}},[t._v("edit")])],1)],1)],1)],1),t._v(" "),a("input",{ref:"uploadClick",attrs:{hidden:"",type:"file",id:"uploadClick",accept:"image/*",capture:"camera"},on:{change:t.changeimg}}),t._v(" "),a("v-card-actions",{directives:[{name:"show",rawName:"v-show",value:t.upload.submit,expression:"upload.submit"}]},[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.theme.color,flat:""},on:{click:t.startUpload}},[a("v-icon",[t._v("backup")]),t._v("更改\n          ")],1)],1)],1)],1)],1),t._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("修改")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{"prepend-icon":"account_circle",counter:10,label:"昵称",required:"",clearable:"",rules:t.validate.nameRules},model:{value:t.user.nickName,callback:function(e){t.$set(t.user,"nickName",e)},expression:"user.nickName"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{"prepend-icon":"lock",label:"年龄",type:"number",required:"",clearable:""},model:{value:t.user.age,callback:function(e){t.$set(t.user,"age",e)},expression:"user.age"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{"prepend-icon":"mail",label:"邮箱",type:"mail",required:"",rules:t.validate.mailRules,clearable:""},model:{value:t.user.mail,callback:function(e){t.$set(t.user,"mail",e)},expression:"user.mail"}})],1),t._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{"prepend-icon":"mail",items:["男","女"],label:"性别"},model:{value:t.user.sex,callback:function(e){t.$set(t.user,"sex",e)},expression:"user.sex"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){t.editDialog=!1}}},[t._v("Close")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.editUser}},[t._v("提交")])],1)],1)],1)],1)],1)},staticRenderFns:[]},M=a("VU/8")(R,H,!1,null,null,null).exports,V=a("GQaK"),z={name:"scroll",props:{probeType:{type:Number,default:1},click:{type:Boolean,default:!0},scrollX:{type:Boolean,default:!0},listenScroll:{type:Boolean,default:!0},item:{type:Object,default:null},pullup:{type:Boolean,default:!1},pulldown:{type:Boolean,default:!1},beforeScroll:{type:Boolean,default:!1},refreshDelay:{type:Number,default:20},hasMore:{type:Boolean,default:!1},BottomLoad:{type:Boolean,default:!1}},data:function(){return{pullupMsg:"more",pulldownMsg:"下拉加载",downProgress:!1,wrapStyle:{width:"100%",height:.8*document.documentElement.clientHeight+"px",overflow:"hidden",position:"relative"}}},mounted:function(){var t=this;setTimeout(function(){t._initScroll()},20)},methods:{_initScroll:function(){var t=this;this.$refs.wrapper&&(this.scroll=new V.a(this.$refs.wrapper,{probeType:this.probeType,click:this.click,scrollX:this.scrollX,mouseWheel:!0}),this.listenScroll&&this.scroll.on("scroll",function(e){e.y>50&&(t.downProgress=!0,t.pulldownMsg="释放立即刷新"),t.$emit("scroll",e)}),this.pullup&&this.scroll.on("scrollEnd",function(){t.downProgress=!1,t.scroll.y<=t.scroll.maxScrollY+50&&t.$emit("scrollToEnd")}),this.pulldown&&this.scroll.on("touchEnd",function(e){var a=Math.abs(t.scroll.distY);t.scroll.distX>80&&a<25&&t.$emit("slideToRight"),t.pulldownMsg="下拉刷新",e.y>50&&t.$emit("pulldown")}),this.beforeScroll&&this.scroll.on("beforeScrollStart",function(){t.$emit("beforeScroll")}))},disable:function(){this.scroll&&this.scroll.disable()},enable:function(){this.scroll&&this.scroll.enable()},refresh:function(){this.scroll&&this.scroll.refresh()},scrollTo:function(){this.scroll&&this.scroll.scrollTo.apply(this.scroll,arguments)},scrollToElement:function(){this.scroll&&this.scroll.scrollToElement.apply(this.scroll,arguments)}},watch:{item:function(){var t=this;setTimeout(function(){t.scroll.refresh()},this.refreshDelay)}}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabbar"},[a("div",{ref:"wrapper",staticClass:"wrapper",style:t.wrapStyle},[a("div",{staticClass:"bscroll-container"},[t.downProgress?a("v-layout",{attrs:{"justify-center":""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"red"}})],1):t._e(),t._v(" "),t._t("default"),t._v(" "),t.hasMore?a("v-layout",{attrs:{"justify-center":""}},[a("v-btn",{attrs:{flat:""}},[t._v("加载更多")])],1):t._e(),t._v(" "),t.BottomLoad?a("v-layout",{attrs:{"justify-center":""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"red"}})],1):t._e()],2)])])},staticRenderFns:[]};var q=a("VU/8")(z,B,!1,function(t){a("eKLf")},"data-v-4e3ed988",null).exports,F={components:{scroll:q},name:"index",data:function(){return{pulldown:!0,pullup:!0,theme:this.$store.state.theme,articles:[],searchShow:!1,searchKey:"",searchSubject:"",subjects:["AI","emotion","share"],YHeight:0,paramInfo:{pageNum:0,pageSize:6,topic:"",authorOpenId:""},totalArticleNum:0,totalPage:0,loadProgress:!1}},computed:{loadMore:function(){return this.paramInfo.pageNum<this.totalPage?"more":"全部加载完"}},watch:{searchSubject:function(t,e){this.changeTopic(t)}},methods:{pullupEvent:function(){this.moreClick()},pulldownEvent:function(){this.initPage()},slideToRight:function(){this.$router.replace({name:"Index"})},changeTopic:function(t){this.paramInfo.topic=t,this.initPage()},search:function(){this.searchKey.trim().length>25&&(this.$root.app_info("文字超出部分将不会生效！"),this.searchKey=this.searchKey.trim().substring(0,25)),this.initPage(!0)},getDetail:function(t){this.$router.push({name:"detail",params:{id:t}})},getArticleList:function(t,e){var a=this;this.loadProgress=!0;var s=this.$store.state.accessInfo;this.$axios.post("/app/api/article/list",t,{headers:{accessKey:s.accessKey,accessToken:s.accessToken}}).then(function(t){a.loadProgress=!1;var s=t.data;if(s.success){if(0==s.body.size)return a.toast(a.searchKey+":没有数据"),void(a.searchKey="");e&&(a.articles=[]),s.body.list.forEach(function(t){var e=t.src;t.src=e,a.articles.push(t)}),a.paramInfo.pageNum+=1,a.totalPage=s.body.pages}else a.$root.app_info(s.message)}).catch(function(t){a.loadProgress=!1})},getTopics:function(){var t=this;return u()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$root.post("/app/api/article/topics",null);case 2:(a=e.sent).result&&(t.subjects=a.body);case 4:case"end":return e.stop()}},e,t)}))()},moreClick:function(){if(this.paramInfo.pageNum<this.totalPage){var t=this.getReqParams();this.getArticleList(t)}else this.$root.app_info("没有更多数据了！")},initPage:function(t){t||(this.articles=[]),this.paramInfo.pageNum=0;var e=this.getReqParams();this.getArticleList(e,t)},getReqParams:function(){var t=new URLSearchParams,e=this.paramInfo.pageNum+1;return t.append("pageNum",e),t.append("userOpenId",this.paramInfo.authorOpenId),t.append("topic",this.paramInfo.topic),t.append("keyWord",this.searchKey),t}},created:function(){this.paramInfo.authorOpenId=this.$route.params.userOpenId||this.$store.state.loginState.user.openid||3},mounted:function(){this.getTopics(),this.initPage()},beforeRouteLeave:function(t,e,a){"detail"==t.name&&(e.meta.keepAlive=!0),a()}},G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loadProgress?a("v-layout",{staticStyle:{position:"fixed",width:"100%","z-index":"2"},attrs:{"justify-center":""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"red"}})],1):t._e(),t._v(" "),a("v-container",{staticClass:"wrapper"},[a("v-card",{directives:[{name:"show",rawName:"v-show",value:t.searchShow,expression:"searchShow"}],staticStyle:{position:"fixed",width:"100%",padding:"16px","z-index":"2"},attrs:{fluid:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs4:"",sm2:"","d-flex":""}},[a("v-select",{attrs:{items:t.subjects,label:"分类"},model:{value:t.searchSubject,callback:function(e){t.searchSubject=e},expression:"searchSubject"}})],1),t._v(" "),a("v-flex",{attrs:{xs8:"",sm10:""}},[a("v-text-field",{attrs:{counter:"25",autofocus:!0},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1)],1)],1),t._v(" "),a("v-container",{attrs:{"grid-list-xl":"",fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("scroll",{attrs:{data:t.articles,pulldown:t.pulldown,pullup:t.pullup,BottomLoad:t.loadProgress},on:{scrollToEnd:t.pullupEvent,pulldown:t.pulldownEvent,slideToRight:t.slideToRight}},t._l(t.articles,function(e){return a("v-flex",{key:e.id,attrs:{xs12:"",sm4:"",md4:"",lg4:""}},[a("v-card",{on:{click:function(a){return t.getDetail(e.id)}}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs7:""}},[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("div",{staticClass:"headline"},[t._v(t._s(e.title))]),t._v(" "),a("div",[t._v(t._s(e.author))]),t._v(" "),a("div",[t._v(t._s(e.time))])])])],1),t._v(" "),a("v-flex",{attrs:{xs5:""}},[a("v-img",{attrs:{src:e.src,height:"125px",contain:""}})],1)],1),t._v(" "),a("v-divider",{attrs:{light:""}}),t._v(" "),a("v-card-actions",{staticClass:"pa-3"},[t._v("\n                "+t._s(e.subject)+"\n                "),a("v-spacer"),t._v(" "),a("v-icon",[t._v("star_border")]),t._v(" "),a("span",[t._v(t._s(e.snum))])],1)],1)],1)}),1)],1)],1),t._v(" "),a("v-layout",{attrs:{"justify-center":"","two-line":""}},[t.loadProgress?t._e():a("v-btn",{attrs:{color:"success",flat:""},on:{click:t.moreClick}},[t._v(t._s(t.loadMore))])],1)],1),t._v(" "),a("v-speed-dial",{attrs:{fixed:"",bottom:"",left:"",direction:"top","open-on-hover":""},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-btn",{attrs:{color:t.theme.color,dark:"",fab:"",small:""},on:{click:function(e){t.searchShow=!t.searchShow}}},[a("v-icon",[t._v("reorder")]),t._v(" "),a("v-icon",[t._v("close")])],1)]},proxy:!0}])})],1)},staticRenderFns:[]},W=a("VU/8")(F,G,!1,null,null,null).exports,Y={data:function(){return{cards:[],bigImg:!1,bigImgInfo:{des:"",src:""},theme:this.$store.state.theme,userOpenId:"",pageNum:0,noMoreToast:!1,YHeight:0,totalPage:0,loadProgress:!1}},computed:{loadMore:function(){return this.pageNum<this.totalPage?"more":"全部加载完"}},methods:{imgStateChange:function(t){console.log(t)},moreClick:function(){this.pageNum<this.totalPage?this.getList():this.noMoreToast||(this.$root.app_info("没有数据了"),this.noMoreToast=!0)},showBigImg:function(t){this.bigImg=!0,this.bigImgInfo=this.cards[t]},getList:function(){var t=this;return u()(i.a.mark(function e(){var a,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$root.post("/app/api/gallery/userGallery",{userOpenId:t.userOpenId,pageNum:t.pageNum+1});case 2:if((a=e.sent).body){for(o in s=a.body.list)s[o].comsrc=s[o].comsrc,s[o].src=s[o].src,t.cards.push(s[o]);t.totalPage=a.body.pages,t.pageNum+=1}case 4:case"end":return e.stop()}},e,t)}))()},imageLoadEvent:function(){console.log("tupian")}},created:function(){this.userOpenId=this.$route.params.userOpenId,img.onload=this.imageLoadEvent},mounted:function(){this.getList()}},J={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loadProgress?a("v-layout",{staticStyle:{position:"fixed",width:"100%","z-index":"2"},attrs:{"justify-center":""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"red"}})],1):t._e(),t._v(" "),[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},t._l(t.cards,function(e,s){return a("v-flex",{key:s,attrs:{xs6:"",sm4:""}},[a("v-card",{on:{click:function(e){return t.showBigImg(s)}}},[a("v-img",{attrs:{src:e.comsrc}},[a("v-container",{attrs:{"fill-height":"",fluid:"","pa-2":""}},[a("v-layout",{attrs:{"fill-height":""}},[a("v-flex",{attrs:{xs12:"","align-end":"",flexbox:""}},[a("span",{staticClass:"headline white--text",domProps:{textContent:t._s(e.des)}})])],1)],1)],1)],1)],1)}),1)],1)],1)],1)],t._v(" "),a("v-layout",{attrs:{row:"","justify-center":"","max-width":"100%"}}),t._v(" "),a("v-layout",{attrs:{"justify-center":"","two-line":""}},[t.loadProgress?t._e():a("v-btn",{attrs:{color:"success",flat:""},on:{click:t.moreClick}},[t._v(t._s(t.loadMore))])],1)],2)},staticRenderFns:[]},X=a("VU/8")(Y,J,!1,null,null,null).exports,Q={name:"index",data:function(){return{articles:[],tempArticles:[],YHeight:0,pageNum:0,total:0,userOpenId:"",toasted:!1,hasNext:!1,loadedId:[],loadProgress:!1}},computed:{loadMore:function(){return this.hasNext?"more":"没有数据了"}},methods:{removeStar:function(t,e){var a=this;return u()(i.a.mark(function s(){var o;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(window.event.stopPropagation(),!confirm("取消收藏？")){s.next=8;break}return o={userOpenId:a.$store.state.loginState.user.openid,id:t,opt:"unStar"},s.next=6,a.$root.post("/app/api/article/starOpt",o);case 6:s.sent.success&&(a.$root.app_info("取消收藏"),a.articles.splice(e,1),a.total-=1);case 8:case"end":return s.stop()}},s,a)}))()},getDetail:function(t){this.$router.push({name:"detail",params:{id:t}})},getArticleList:function(){var t=this;return u()(i.a.mark(function e(){var a,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={userOpenId:t.userOpenId,pageNum:t.pageNum+1},e.next=3,t.$root.post("/app/api/user/starList",a);case 3:(s=e.sent).body&&(t.pageNum=t.pageNum+1,t.total=s.body.total,o=s.body.list,t.hasNext=s.body.hasNextPage,o.forEach(function(e){t.articles.push(e)}));case 5:case"end":return e.stop()}},e,t)}))()},moreClick:function(t){t.stopPropagation(),this.hasNext?this.getArticleList():this.$root.app_info("没有数据了")}},mounted:function(){this.articles=[],this.pageNum=0,this.userOpenId=this.$route.params.userOpenId||this.$store.state.loginState.user.openid||3,this.getArticleList()},beforeRouteLeave:function(t,e,a){"detail"==t.name&&(e.meta.keepAlive=!0),a()}},Z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"grey lighten-3",staticStyle:{"max-width":"400px",margin:"auto"},attrs:{id:"e3"}},[a("v-card",[a("v-container",{attrs:{fluid:"","grid-list-lg":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[t.total<1?a("v-card",[a("v-card-title",[t._v("收藏列表是空的")])],1):t._e(),t._v(" "),t._l(t.articles,function(e,s){return a("v-flex",{key:s,attrs:{xs12:""},on:{click:function(a){return t.getDetail(e.id)}}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("div",{staticClass:"headline"},[t._v(t._s(e.title))]),t._v(" "),a("span",[t._v(t._s(e.subject))])])]),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:""}},[t._v(t._s(e.author))]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{flat:""},on:{click:function(a){return t.removeStar(e.id,s)}}},[t._v("取消")])],1)],1)],1)})],2),t._v(" "),a("v-layout",{attrs:{"justify-center":"","two-line":""}},[t.loadProgress?a("v-progress-circular",{attrs:{indeterminate:"",color:"red"}}):t._e(),t._v(" "),t.loadProgress?t._e():a("div",[t._v(t._s(t.loadMore))])],1)],1)],1)],1)},staticRenderFns:[]},tt=a("VU/8")(Q,Z,!1,null,null,null).exports,et={components:{scroll:q},name:"detail",data:function(){return{pulldown:!0,pullup:!0,pulldownShow:!0,pullupShow:!0,pullupMsg:"more",pulldownMsg:"松开加载",stared:!1,loadProgress:!1,articleList:[],content:"",articleId:this.$route.params.id,articleInfo:{title:"",subject:"",snum:0,authorId:"",author:"",time:""},dialog:!1,theme:this.$store.state.theme,commentContent:"",commentPageNum:0,commentTotalPage:1,commentList:[],documentWidth:1,commentAllDone:!1}},computed:{starColor:function(){return this.stared?"red":this.theme.color}},mounted:function(){this.$route.params.id;this.getArticleDetail()},created:function(){this.getArticleDetail(),this.documentWidth=.9*document.body.clientWidth},beforeDestroy:function(){window.getVue.$emit("CHANGE_TITLE","geeklemon")},methods:{pulldownEvent:function(){var t=this;this.pulldownShow=!0,setTimeout(function(){t.pulldownShow=!1},1e3)},pullupEvent:function(){console.log("up")},pageBack:function(){this.$router.back()},comment:function(){var t=this;if(this.$store.state.loginState.isLogin)if(this.commentContent.trim().length>0){this.dialog=!1;var e=this.commentContent.trim();this.commentContent.trim().length>100&&(e=this.commentContent.trim().substring(0,100),this.$toasted.global.app_warning({message:"超出字数的字将被抛弃"}));this.$toasted.global.app_loading();this.commentContent="";var a=this.$store.state.accessInfo,s=new URLSearchParams;s.append("articleId",this.$route.params.id),s.append("userOpenId",this.$store.state.loginState.user.openid),s.append("content",e),this.$axios.post("/app/api/article/comment",s,{headers:{accessKey:a.accessKey,accessToken:a.accessToken}}).then(function(e){e.data.success?t.$toasted.global.app_info({message:"超出字数的字将被抛弃"}):t.$toasted.global.app_error({message:"评论出错，稍后再试"})})}else this.$toasted.global.app_warning({message:"内容不能空"});else this.$toasted.global.app_login()},toggleComment:function(){if(this.$store.state.loginState.isLogin)this.dialog=!this.dialog;else{window.getVue.$emit("LOGIN_SHOW");this.$toasted.global.app_login()}},getArticleDetail:function(){var t=this;this.loadProgress=!0;var e=this.$store.state.accessInfo,a=new URLSearchParams;a.append("id",this.$route.params.id),this.$store.state.loginState.isLogin&&a.append("userOpenId",this.$store.state.loginState.user.openid),this.$axios.post("/app/api/article/info",a,{headers:{accessKey:e.accessKey,accessToken:e.accessToken}}).then(function(e){if(t.loadProgress=!1,e.data.result){var a=e.data.body.result,s=a.title,o=a.subject,r=a.snum,i=a.authorId,n=a.author,l=a.time;t.articleInfo.title=s,t.articleInfo.subject=o,t.articleInfo.snum=r,t.articleInfo.authorId=i,t.articleInfo.author=n,t.articleInfo.time=l,t.author=n;var c=e.data.body.starStatus;t.stared=c,window.getVue.$emit("CHANGE_TITLE",s),t.content=e.data.body.result.content.replace(/src=\"\//g,'src="http://43.226.40.196:8080/')}else t.$toasted.global.app_error({message:e.data.message})})},starArticle:function(){var t=this;if(this.$store.state.loginState.isLogin){var e=this.$store.state.accessInfo,a=new URLSearchParams;if(a.append("userOpenId",this.$store.state.loginState.user.openid),a.append("id",this.articleId),this.stared){if(!confirm("取消收藏吗？"))return;a.append("opt","unStar")}else a.append("opt","star");this.$axios.post("/app/api/article/starOpt",a,{headers:{accessKey:e.accessKey,accessToken:e.accessToken}}).then(function(e){e.data.success?(t.$toasted.global.app_info({message:e.data.body}),t.stared=!t.stared):t.$toasted.global.app_error({message:"操作失败，请稍后重试！"})})}else window.getVue.$emit("LOGIN_SHOW"),this.$toasted.global.app_login()},handleScroll:function(){var t=document.body.scrollHeight,e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,a=document.documentElement.clientHeight||document.body.clientHeight;if(this.YHeight=e,a+e>=t)if(this.commentPageNum<this.commentTotalPage){var s=new URLSearchParams;s.append("articleId",this.articleId),s.append("pageNum",this.commentPageNum+1),this.getComments(s)}else this.commentAllDone||(this.$toasted.global.app_info({message:"已加载所有评论！"}),this.commentAllDone=!0)},getComments:function(t){var e=this,a=this.$store.state.accessInfo;this.$axios.post("/app/api/article/comment/list",t,{headers:{accessKey:a.accessKey,accessToken:a.accessToken}}).then(function(t){t.data.result&&(e.commentTotalPage=t.data.body.pages,t.data.body.list.forEach(function(t){e.commentList.push(t)}),e.commentPageNum+=1)})}}},at={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("scroll",{attrs:{data:t.commentList,pulldown:t.pulldown,pullup:t.pullup},on:{pullup:t.pullupEvent,pulldown:t.pulldownEvent}},[a("div",[t.loadProgress?a("v-layout",{staticStyle:{position:"fixed",width:"100%","z-index":"2"},attrs:{"justify-center":""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"red"}})],1):t._e(),t._v(" "),a("v-container",{ref:"content",attrs:{"grid-list-xl":"",fluid:"",id:"detail"}},[a("v-layout",{attrs:{row:"",wrap:""}}),t._v(" "),a("div",{staticClass:"text-xs-center"},[a("v-icon",{attrs:{color:t.theme.color}},[t._v("account_circle")]),t._v("\n          "+t._s(t.articleInfo.author)+"\n          "),a("v-icon",{attrs:{color:t.theme.color}},[t._v("alarm")]),t._v("\n          "+t._s(t.articleInfo.time)+"\n          "),a("v-icon",{attrs:{color:t.theme.color}},[t._v("email")]),t._v("\n          "+t._s(t.articleInfo.subject)+"\n          "),a("v-icon",{attrs:{color:t.starColor},on:{click:t.starArticle}},[t._v("favorite")]),t._v("\n          "+t._s(t.articleInfo.snum)+"\n        ")],1),t._v(" "),a("v-badge"),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.content)}}),t._v(" "),a("div",[a("v-btn",{attrs:{flat:"",color:t.theme.color}},[a("v-icon",[t._v("book")]),t._v("评论\n          ")],1)],1),t._v(" "),t.commentList.length>0?a("div",t._l(t.commentList,function(e){return a("v-card",{key:e.id},[a("v-card-title",[t._v(t._s(e.user)+" 在 "+t._s(e.time)+" 说:")]),t._v(" "),a("v-card-text",{domProps:{innerHTML:t._s(e.content)}})],1)}),1):t._e(),t._v(" "),a("v-speed-dial",{attrs:{fixed:"",bottom:"",left:"",direction:"top","open-on-hover":""},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-btn",{attrs:{color:t.theme.color,dark:"",fab:"",small:""}},[a("v-icon",[t._v("reorder")]),t._v(" "),a("v-icon",[t._v("close")])],1)]},proxy:!0}])},[t._v(" "),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:t.starColor},on:{click:t.starArticle}},[a("v-icon",[t._v("favorite")])],1),t._v(" "),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:t.theme.color},on:{click:t.toggleComment}},[a("v-icon",[t._v("chat")])],1),t._v(" "),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:t.theme.color}},[a("v-icon",[t._v("call_split")])],1)],1),t._v(" "),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("评论")])]),t._v(" "),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-textarea",{attrs:{counter:"100",name:"input-7-1",label:"comment",hint:"",autofocus:"",clearable:""},model:{value:t.commentContent,callback:function(e){t.commentContent=e},expression:"commentContent"}})],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:t.theme.color,flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),t._v(" "),a("v-btn",{attrs:{color:t.theme.color,flat:""},on:{click:t.comment}},[t._v("评论")])],1)],1)],1)],1)],1)],1)])],1)},staticRenderFns:[]},st=a("VU/8")(et,at,!1,null,null,null).exports,ot=(a("v2ns"),a("7QTg")),rt={components:{swiper:ot.swiper,swiperSlide:ot.swiperSlide},data:function(){var t=this;return{swiperOption:{mousewheel:!0,observer:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination"},on:{slideChangeTransitionEnd:function(){t.swiper.slides.length,t.swiper.activeIndex}},lazy:{loadPrevNext:!0}}}},computed:{swiper:function(){return this.$refs.mySwiper.swiper}},mounted:function(){}},it={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("swiper",{ref:"mySwiper",attrs:{options:t.swiperOption}},[a("swiper-slide",[a("img",{staticClass:"swiper-lazy",attrs:{"data-src":"http://lorempixel.com/1200/1200/nature/1"}}),t._v(" "),a("div",{staticClass:"swiper-lazy-preloader"})]),t._v(" "),a("swiper-slide",[a("img",{staticClass:"swiper-lazy",attrs:{"data-src":"http://lorempixel.com/1200/1200/nature/1"}}),t._v(" "),a("div",{staticClass:"swiper-lazy-preloader"})]),t._v(" "),a("swiper-slide",[a("img",{staticClass:"swiper-lazy",attrs:{"data-src":"http://lorempixel.com/1200/1200/nature/1"}}),t._v(" "),a("div",{staticClass:"swiper-lazy-preloader"})]),t._v(" "),a("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"}),t._v(" "),a("div",{staticClass:"swiper-button-prev",attrs:{slot:"button-prev"},slot:"button-prev"}),t._v(" "),a("div",{staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"})],1)],1)},staticRenderFns:[]};var nt=a("VU/8")(rt,it,!1,function(t){a("qPGz")},"data-v-13975ef5",null).exports;v.default.use(y.a);var lt=new y.a({routes:[{path:"/",redirect:"/index"},{path:"/index",name:"Index",component:I,meta:{keepAlive:!0}},{path:"/detail/:id",name:"detail",component:L},{path:"/article/list",name:"articleList",component:j},{path:"/user/profile",name:"UserProfile",component:M},{path:"/user/article",name:"UserArticleList",component:W},{path:"/user/gallery",name:"UserGallery",component:X},{path:"/user/stars",name:"UserStarList",component:tt},{path:"/test",name:"Test",component:st},{path:"/swiper",name:"SwiperDemo",component:nt}]}),ct=a("3EgV"),ut=a.n(ct),dt=a("NYxO");v.default.use(dt.a);var pt=new dt.a.Store({state:{theme:{color:"cyan"},themeColors:["primary","pink","cyan","indigo","lime","gary"],loginState:{isLogin:!1,openId:"",user:""},title:"geeklemon",accessInfo:{accessKey:null,accessToken:null,timestamp:null}},mutations:{changeTheme:function(t,e){t.theme.color=t.themeColors[e]},changeLoginState:function(t,e){t.loginState=e},changeTitle:function(t,e){t.title=e},valueAccessInfo:function(t,e){t.accessInfo.accessKey=e.accessKey,t.accessInfo.accessToken=e.accessToken,t.accessInfo.timestamp=e.timestamp}}}),vt=a("ppUw"),ht=a.n(vt),mt={appKey:"key",appSecret:"secret"},ft=a("I0MY"),gt=a.n(ft),_t=a("IZMb"),bt=a.n(_t),wt={remoteAddress:"http://49.234.192.162:8091"},xt=a("mtWM"),yt=a.n(xt);yt.a.defaults.baseURL="http://49.234.192.162:8091",v.default.prototype.$axios=yt.a,v.default.prototype.$remoteProperties=wt,yt.a.interceptors.response.use(function(t){return t.data.result||666!=t.data.code||(console.log("token失败截获"),window.getVue.$emit("FIX-ACCESSTOKEN")),t},function(t){v.default.toasted.show(t,{theme:"bubble",position:"top-right",duration:1e3});return p.a.reject(t)}),yt.a.interceptors.request.use(function(t){return t},function(t){v.default.toasted.show(t,{theme:"bubble",position:"top-right",duration:1e3});return p.a.reject(t)}),v.default.use(bt.a,{singleton:!0}),v.default.use(gt.a,{name:"v-touch"}),v.default.use(N.a),v.default.config.productionTip=!1,v.default.use(ut.a),v.default.use(ht.a),v.default.prototype.checkLogin=function(t){try{var e=JSON.parse(localStorage.getItem("geeklemon-login-info"));if(Boolean(e)&&e.timestamp){var a=!0,s=e.user,o=e.timestamp,r=(new Date).getTime-o;return Math.floor(r/864e5)>30&&(localStorage.setItem("geeklemon-login-info",null),a=!1,msg="登陆信息过期",s=null,openId=""),{isLogin:a,user:s,timestamp:o}}return{isLogin:!1,user:null}}catch(t){return{isLogin:!1,user:null}}},new v.default({el:"#app",router:lt,store:pt,components:{App:x},data:function(){return{reTryToken:0}},template:"<App/>",created:function(){this.checklogin(!1),this.getAppTheme(),this.checkAccessInfo(),this.registAppToast()},methods:{post:function(t,e){var a=this;return u()(i.a.mark(function s(){var o,r,n,c;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,null,o=a.$store.state.accessInfo,r=null,e&&"object"==(void 0===e?"undefined":l()(e)))for(n in r=new URLSearchParams,e)r.append(n,e[n]);return s.next=7,a.$axios.post(t,r,{headers:{accessKey:o.accessKey,accessToken:o.accessToken}});case 7:return c=(c=s.sent).data,a.$toasted.clear(),s.abrupt("return",new p.a(function(t,e){c.result&&c.success?t(c):a.app_error(c.message)}));case 13:s.prev=13,s.t0=s.catch(0),a.$toasted.clear(),a.app_error(s.t0);case 17:case"end":return s.stop()}},s,a,[[0,13]])}))()},app_error:function(t){this.$toasted.global.app_error({message:t})},app_info:function(t){this.$toasted.global.app_info({message:t})},app_loading:function(t){this.$toasted.global.app_loading({message:t})},app_login:function(t){this.$toasted.global.app_login({message:t})},app_warning:function(t){this.$toasted.global.app_warning({message:t})},checklogin:function(){var t=this.checkLogin();console.log(t),this.$store.commit("changeLoginState",t),console.log("登陆状态："+t.isLogin)},getAppTheme:function(){var t=this.$cookies.get("geeklemon-app-theme");if(Boolean(t)){var e=2;try{e=parseInt(t)}catch(t){e=2}e&&this.$store.commit("changeTheme",e)}},checkAccessInfo:function(){var t=localStorage.getItem("geeklemon-accessInfo");try{if(Boolean(t)){var e=JSON.parse(t),a=e.timestamp;if(a&&e.accessKey)return void(((new Date).getTime()-a)/864e5>1?this.getAccessInfo():this.$store.commit("valueAccessInfo",e));this.getAccessInfo()}}catch(t){console.log("checkAccess err:"+t)}this.getAccessInfo()},getAccessInfo:function(){var t=this,e=new URLSearchParams;e.append("appKey",mt.appKey),e.append("appSecret",mt.appSecret),this.$axios.post("/app/accessToken",e).then(function(e){if(e.data.code){var a=e.data;t.$store.commit("valueAccessInfo",a);var s=o()(a);localStorage.setItem("geeklemon-accessInfo",s)}else t.$toasted.info("token校验失败，稍后重试!")})},registAppToast:function(){this.$toasted.register("app_info",function(t){return t.message?t.message:"Oops.."},{className:this.$store.state.theme.color,duration:1e3,theme:"bubble"}),this.$toasted.register("app_login",function(t){return t.message?t.message:"未登录"},{className:this.$store.state.theme.color,duration:1e3,theme:"outline",icon:"lock"}),this.$toasted.register("app_warning",function(t){return t.message?t.message:"..."},{className:this.$store.state.theme.color,duration:1e3,theme:"bubble",icon:"error_outline"}),this.$toasted.register("app_loading","loading...",{className:this.$store.state.theme.color,duration:1e4,theme:"bubble",icon:"hourglass_empty_full"}),this.$toasted.register("app_error",function(t){return t.message?t.message:"出错了"},{className:this.$store.state.theme.color,duration:1e3,theme:"outline",icon:"report_problem"})}},mounted:function(){var t=this;window.getVue.$on("FIX-ACCESSTOKEN",function(){localStorage.setItem("geeklemon-accessInfo",null),t.reTryToken+=1,t.reTryToken>5||t.getAccessInfo()})}})},eKLf:function(t,e){},qPGz:function(t,e){},v2ns:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.fb4eeafd0afd7eb1b29b.js.map